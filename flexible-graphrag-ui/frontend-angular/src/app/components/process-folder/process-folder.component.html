<mat-card class="mb-4">
  <mat-card-header>
    <mat-card-title>Ingest Documents</mat-card-title>
    <mat-card-subtitle>Ingest documents from various data sources</mat-card-subtitle>
  </mat-card-header>
  
  <mat-card-content>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
      <!-- Data Source Selection -->
      <mat-form-field appearance="outline" class="w-100 mb-3">
        <mat-label>Data Source</mat-label>
        <mat-select formControlName="dataSource" [disabled]="isProcessing">
          <mat-option value="filesystem">File System</mat-option>
          <mat-option value="cmis">CMIS Repository</mat-option>
          <mat-option value="alfresco">Alfresco Repository</mat-option>
        </mat-select>
        <mat-hint>Choose the data source for document ingestion</mat-hint>
      </mat-form-field>

      <!-- File System Path Input -->
      <mat-form-field appearance="outline" class="w-100" *ngIf="form.value.dataSource === 'filesystem'">
        <mat-label>File or Folder Path</mat-label>
        <input 
          matInput 
          formControlName="folderPath"
          placeholder="Enter file or folder path"
          [disabled]="isProcessing"
        >
        <mat-hint>Enter the path to a file or folder you want to process</mat-hint>
      </mat-form-field>

      <!-- CMIS Configuration -->
      <div *ngIf="form.value.dataSource === 'cmis'" class="cmis-config">
        <mat-form-field appearance="outline" class="w-100 mb-2">
          <mat-label>CMIS Repository URL</mat-label>
          <input 
            matInput 
            formControlName="cmisUrl"
            placeholder="http://localhost:8080/alfresco/api/-default-/public/cmis/versions/1.1/atom"
            [disabled]="isProcessing"
          >
        </mat-form-field>
        
        <div class="row">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100 mb-2">
              <mat-label>Username</mat-label>
              <input 
                matInput 
                formControlName="cmisUsername"
                [disabled]="isProcessing"
              >
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100 mb-2">
              <mat-label>Password</mat-label>
              <input 
                matInput 
                type="password"
                formControlName="cmisPassword"
                [disabled]="isProcessing"
              >
            </mat-form-field>
          </div>
        </div>
        
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Folder Path</mat-label>
          <input 
            matInput 
            formControlName="folderPath"
            placeholder="/Sites/example-site/documentLibrary"
            [disabled]="isProcessing"
          >
          <mat-hint>CMIS folder path to process</mat-hint>
        </mat-form-field>
      </div>

      <!-- Alfresco Configuration -->
      <div *ngIf="form.value.dataSource === 'alfresco'" class="alfresco-config">
        <mat-form-field appearance="outline" class="w-100 mb-2">
          <mat-label>Alfresco Base URL</mat-label>
          <input 
            matInput 
            formControlName="alfrescoUrl"
            placeholder="http://localhost:8080/alfresco"
            [disabled]="isProcessing"
          >
        </mat-form-field>
        
        <div class="row">
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100 mb-2">
              <mat-label>Username</mat-label>
              <input 
                matInput 
                formControlName="alfrescoUsername"
                [disabled]="isProcessing"
              >
            </mat-form-field>
          </div>
          <div class="col-md-6">
            <mat-form-field appearance="outline" class="w-100 mb-2">
              <mat-label>Password</mat-label>
              <input 
                matInput 
                type="password"
                formControlName="alfrescoPassword"
                [disabled]="isProcessing"
              >
            </mat-form-field>
          </div>
        </div>
        
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Path</mat-label>
          <input 
            matInput 
            formControlName="folderPath"
            placeholder="/Sites/example-site/documentLibrary"
            [disabled]="isProcessing"
          >
          <mat-hint>Alfresco path to process</mat-hint>
        </mat-form-field>
      </div>

      <div class="mt-3">
        <button 
          mat-raised-button 
          color="primary" 
          type="submit"
          [disabled]="form.invalid || isProcessing"
        >
          <span *ngIf="!isProcessing">Ingest Documents</span>
          <mat-spinner *ngIf="isProcessing" diameter="24"></mat-spinner>
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
